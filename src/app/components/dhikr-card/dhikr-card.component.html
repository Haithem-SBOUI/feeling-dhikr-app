<ion-card class="dhikr-card" [class.clickable]="true" [class.completed]="isCompleted()" (click)="onCardClick()">
  <ion-card-header>
    <ion-card-title class="resource-title">
      {{ lang() === 'ar' ? dhikr.resourceAr : dhikr.resource }}
    </ion-card-title>
  </ion-card-header>

  <ion-card-content>
    <div class="dhikr-content" [class.arabic]="lang() === 'ar'">
      {{ lang() === 'ar' ? dhikr.contentAr : dhikr.content }}
    </div>
    
    <!-- Progress Bar -->
    <div class="progress-container">
      <ion-progress-bar 
        [value]="getProgress()" 
        [class.completed]="isCompleted()">
      </ion-progress-bar>
    </div>
    
    <!-- Counter Display -->
    <div class="repetitions-container">
      <ion-badge 
        [color]="isCompleted() ? 'success' : 'primary'" 
        class="repetitions-badge">
        <span class="repetitions-text" [class.animate-pop]="shouldAnimateCounter()">
          {{ currentCount() }} / {{ dhikr.repetitions }}
        </span>
      </ion-badge>
      
      <div class="counter-actions">
        @if (isCompleted()) {
          <span class="completion-icon">âœ“</span>
        }
        @if (currentCount() > 0) {
          <ion-icon 
            name="refresh-outline" 
            class="reset-icon"
            (click)="onResetClick($event)"
            title="Reset">
          </ion-icon>
        }
      </div>
    </div>
  </ion-card-content>
</ion-card>
